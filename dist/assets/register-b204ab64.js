import{j as s,r as i,c as N,L as w}from"./index-c9bca00a.js";const C="_popup_1lqi4_1",S="_close_1lqi4_14",$="_button_1lqi4_35",g="_popupInner_1lqi4_45",r={popup:C,close:S,button:$,popupInner:g,"slide-in":"_slide-in_1lqi4_1","fade-in":"_fade-in_1lqi4_1"},q="_popup_td4t6_1",R="_open_td4t6_16",k="_popupInner_td4t6_21",F="_close_td4t6_32",l={popup:q,open:R,popupInner:k,close:F},T=({onClose:o,selectedLanguage:n})=>s.jsx("div",{className:l.popup,children:s.jsxs("div",{className:l.popupInner,children:[s.jsx("h2",{children:n==="chinese"?"账号已存在":"Account already exist"}),s.jsx("p",{children:n==="chinese"?"尝试另一个用户名和密码。":"Try another username and password."}),s.jsx("button",{onClick:o,className:l.close,children:n==="chinese"?"返回":"Go back"})]})}),E="_popup_td4t6_1",P="_open_td4t6_16",A="_popupInner_td4t6_21",G="_close_td4t6_32",a={popup:E,open:P,popupInner:A,close:G},O=({onClose:o,selectedLanguage:n})=>s.jsx("div",{className:a.popup,children:s.jsxs("div",{className:a.popupInner,children:[s.jsx("h2",{children:n==="chinese"?"注册成功":"Account Registered!"}),s.jsx("p",{children:n==="chinese"?"您的帐户已注册成功。":"Your account is registered successfully."}),s.jsx("button",{onClick:o,className:a.close,children:n==="chinese"?"返回":"Go back"})]})}),B=({className:o,onClose:n,selectedLanguage:t})=>{const[d,x]=i.useState(""),[u,j]=i.useState(""),[f,c]=i.useState(!1),[p,h]=i.useState({registered:!1,success:!1,failed:!1}),m=e=>{n(e)},b=async()=>{c(!0);try{const e=await fetch("/api/register",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({username:d,password:u})});e.ok?(c(!1),y()):e.status===400?(c(!1),_()):(c(!1),_(),console.error(`Error: ${e.statusText}`))}finally{}},y=()=>{h(()=>({registered:!0,success:!0,failed:!1}))},_=()=>{h(()=>({registered:!0,success:!1,failed:!0}))},v=e=>{n(e),window.location.href="/"},I=e=>{n(e),window.location.href="/"};return s.jsxs("div",{className:N(r.root,o),children:[f&&s.jsx(w,{}),s.jsxs("div",{className:r.popup,children:[p.registered&&s.jsxs(s.Fragment,{children:[p.success&&s.jsx("div",{children:s.jsx(O,{onClose:v,selectedLanguage:t})}),p.failed&&s.jsx("div",{children:s.jsx(T,{onClose:I,selectedLanguage:t})})]}),s.jsxs("div",{className:r.popupInner,children:[s.jsx("button",{onClick:m,className:r.close,children:t==="chinese"?"关闭":"Close"}),s.jsx("label",{children:t==="chinese"?"用户名:":"Username:"}),s.jsx("br",{}),s.jsx("input",{id:"username",type:"text",value:d,onChange:e=>x(e.target.value),required:!0}),s.jsx("br",{}),s.jsx("label",{children:t==="chinese"?"密码:":"Password:"}),s.jsx("br",{}),s.jsx("input",{id:"password",type:"test",value:u,onChange:e=>j(e.target.value),required:!0}),s.jsx("br",{}),s.jsx("button",{id:"registrationButton",className:r.button,type:"button",onClick:b,children:t==="chinese"?"注册账号！":"Register account!"})]})]})]})};export{B as Register};
