import{j as s,r as j,c as w}from"./index-feb6b69d.js";import{p as I}from"./paymentImage-1c1c593e.js";const A="_popup_fajwk_1",N="_close_fajwk_14",$="_button_fajwk_35",C="_popupInner_fajwk_46",c={popup:A,close:N,button:$,popupInner:C,"slide-in":"_slide-in_fajwk_1","fade-in":"_fade-in_fajwk_1"},S="_popup_td4t6_1",T="_open_td4t6_16",g="_popupInner_td4t6_21",F="_close_td4t6_32",d={popup:S,open:T,popupInner:g,close:F},E=({selectedLanguage:o,onClose:e,amount:t})=>s.jsx("div",{className:d.popup,children:s.jsxs("div",{className:d.popupInner,children:[s.jsxs("div",{children:[s.jsx("img",{src:I,alt:"Payment Image",style:{maxHeight:"12em"}}),s.jsxs("p",{children:[o==="chinese"?"你需要付":"You need to pay"," ",s.jsxs("span",{style:{fontWeight:"bold"},children:["¥",t]})]})]}),s.jsx("h2",{children:o==="chinese"?"已添加金额":"Amount Added!"}),s.jsx("p",{children:o==="chinese"?"金额已成功添加到您的账户。":"The amount has been added to your account successfully."}),s.jsx("button",{onClick:e,className:d.close,children:o==="chinese"?"返回":"Go back"})]})}),B="_popup_td4t6_1",G="_open_td4t6_16",M="_popupInner_td4t6_21",O="_close_td4t6_32",a={popup:B,open:G,popupInner:M,close:O},P=({onClose:o,selectedLanguage:e})=>s.jsx("div",{className:a.popup,children:s.jsxs("div",{className:a.popupInner,children:[s.jsx("h2",{children:e==="chinese"?"null":"This shouldn't happen"}),s.jsx("p",{children:e==="chinese"?"null":"You shouldn't see this page if you do contact me(shawn)."}),s.jsx("button",{onClick:o,className:a.close,children:e==="chinese"?"返回":"Go back"})]})}),z=({className:o,onClose:e,selectedLanguage:t})=>{const[p,m]=j.useState(""),[l,r]=j.useState({adding:!1,success:!1,failed:!1}),x=n=>{e(n)},f=async()=>{const n=v("access_token"),i=await fetch("/api/addMoneyToAcc",{method:"POST",headers:{"Content-Type":"application/json",Authorization:`Bearer ${n}`},credentials:"include",body:JSON.stringify({amount:p})});i.ok?y():i.status===400?u():(u(),console.error(`Error: ${i.statusText}`))},y=()=>{r(()=>({adding:!0,success:!0,failed:!1}))},u=()=>{r(()=>({adding:!0,success:!1,failed:!0}))},b=n=>{e(n),window.location.href="/"},k=n=>{e(n),window.location.href="/"},v=n=>{var _;const h=`; ${document.cookie}`.split(`; ${n}=`);if(h.length===2)return(_=h.pop())==null?void 0:_.split(";").shift()};return s.jsx("div",{className:w(c.root,o),children:s.jsxs("div",{className:c.popup,children:[l.adding&&s.jsxs(s.Fragment,{children:[l.success&&s.jsx("div",{children:s.jsx(E,{onClose:b,selectedLanguage:t,amount:p})}),l.failed&&s.jsx("div",{children:s.jsx(P,{onClose:k,selectedLanguage:t})})]}),s.jsxs("div",{className:c.popupInner,children:[s.jsx("button",{onClick:x,className:c.close,children:t==="chinese"?"关闭":"Close"}),s.jsx("label",{children:t==="chinese"?"数量:":"Amount:"}),s.jsx("br",{}),s.jsx("input",{id:"amount",type:"text",value:p,onChange:n=>m(n.target.value),required:!0}),s.jsx("br",{}),s.jsx("button",{id:"registrationButton",className:c.button,type:"button",onClick:f,children:t==="chinese"?"添加金额到帐户！":"Add amount to account!"})]})]})})};export{z as AddMoneyToAcc};
