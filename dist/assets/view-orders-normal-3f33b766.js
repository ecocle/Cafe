import{r as h,j as e,L as k}from"./index-f1d7d55c.js";const d={"orders-table-container":"_orders-table-container_1664h_1","orders-table":"_orders-table_1664h_1"},v=({selectedLanguage:r})=>{const[p,m]=h.useState([]),[c,j]=h.useState(null),[u,l]=h.useState(!1);h.useEffect(()=>{f()},[]);const f=async()=>{l(!0);try{const t=C("access_token"),s=await fetch("/api/admin/ordersNormal",{method:"GET",headers:{"Content-Type":"application/json",Authorization:`Bearer ${t}`},credentials:"include"});s.ok||console.error("Network response was not ok");const i=(await s.json()).data.map(a=>({id:a.ID,order_time:a.Order_time,first_name:a.First_name,last_name:a.Last_name,coffee_type:a.Coffee_type,temperature:a.Temperature,toppings:a.Toppings,size:a.Size,price:parseFloat(a.Price),comments:a.Comments,cup:a.Cup,charles:a.Charles}));l(!1),m(i)}catch(t){l(!1),console.error("Error fetching order data:",t)}},x=t=>{j(t)},o=(t,s,n)=>{const i=[...p];i[n][s]=t.target.value,m(i),_(i[n])},_=async t=>{try{(await fetch("/api/admin/updateOrder",{method:"PUT",headers:{"Content-Type":"application/json"},body:JSON.stringify(t)})).ok||console.error("Network response was not ok")}catch(s){console.error("Error updating order:",s)}},C=t=>{var i;const n=`; ${document.cookie}`.split(`; ${t}=`);if(n.length===2)return(i=n.pop())==null?void 0:i.split(";").shift()},y=()=>p.map((t,s)=>e.jsxs("tr",{onClick:()=>x(s),children:[e.jsx("td",{children:t.order_time}),e.jsx("td",{children:c===s?e.jsx("input",{value:t.first_name,onChange:n=>o(n,"first_name",s)}):t.first_name}),e.jsx("td",{children:c===s?e.jsx("input",{value:t.last_name,onChange:n=>o(n,"last_name",s)}):t.last_name}),e.jsx("td",{children:t.coffee_type}),e.jsx("td",{children:c===s?e.jsx("input",{value:t.temperature,onChange:n=>o(n,"temperature",s)}):t.temperature}),e.jsx("td",{children:t.toppings}),e.jsx("td",{children:t.size}),e.jsx("td",{children:t.price}),e.jsx("td",{children:c===s?e.jsx("input",{value:t.comments||"",onChange:n=>o(n,"comments",s)}):t.comments}),e.jsx("td",{children:c===s?e.jsx("input",{value:t.cup||"",onChange:n=>o(n,"cup",s)}):t.cup})]},t.id));return e.jsxs("div",{className:d["orders-table-container"],children:[u&&e.jsx(k,{}),e.jsx("h2",{className:"header",children:r==="chinese"?"":"Orders Data"}),e.jsxs("table",{className:d["orders-table"],children:[e.jsx("thead",{children:e.jsxs("tr",{children:[e.jsx("th",{children:r==="chinese"?"订单时间":"Order Time"}),e.jsx("th",{children:r==="chinese"?"名":"First Name"}),e.jsx("th",{children:r==="chinese"?"姓":"Last Name"}),e.jsx("th",{children:r==="chinese"?"类型":"Type"}),e.jsx("th",{children:r==="chinese"?"温度":"Temperature"}),e.jsx("th",{children:r==="chinese"?"配料":"Toppings"}),e.jsx("th",{children:r==="chinese"?"大小":"Size"}),e.jsx("th",{children:r==="chinese"?"价钱":"Price"}),e.jsx("th",{children:r==="chinese"?"备注":"Comments"}),e.jsx("th",{children:r==="chinese"?"杯子":"Cup"})]})}),e.jsx("tbody",{children:y()})]})]})};export{v as ViewOrdersNormal};
