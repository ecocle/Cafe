import{j as s,r as i,c as N,L as w}from"./index-db80de71.js";const C="_popup_17rpm_1",S="_close_17rpm_14",$="_button_17rpm_34",g="_popupInner_17rpm_56",r={popup:C,close:S,button:$,popupInner:g,"slide-in":"_slide-in_17rpm_1","fade-in":"_fade-in_17rpm_1"},R="_popup_td4t6_1",k="_open_td4t6_16",F="_popupInner_td4t6_21",T="_close_td4t6_32",d={popup:R,open:k,popupInner:F,close:T},E=({onClose:o,selectedLanguage:n})=>s.jsx("div",{className:d.popup,children:s.jsxs("div",{className:d.popupInner,children:[s.jsx("h2",{children:n==="chinese"?"账号已存在":"Account already exist"}),s.jsx("p",{children:n==="chinese"?"尝试另一个用户名和密码。":"Try another username and password."}),s.jsx("button",{onClick:o,className:d.close,children:n==="chinese"?"返回":"Go back"})]})}),P="_popup_td4t6_1",A="_open_td4t6_16",G="_popupInner_td4t6_21",O="_close_td4t6_32",u={popup:P,open:A,popupInner:G,close:O},U=({onClose:o,selectedLanguage:n})=>s.jsx("div",{className:u.popup,children:s.jsxs("div",{className:u.popupInner,children:[s.jsx("h2",{children:n==="chinese"?"注册成功":"Account Registered!"}),s.jsx("p",{children:n==="chinese"?"您的帐户已注册成功。":"Your account is registered successfully."}),s.jsx("button",{onClick:o,className:u.close,children:n==="chinese"?"返回":"Go back"})]})}),J=({className:o,onClose:n,selectedLanguage:t})=>{const[p,x]=i.useState(""),[l,j]=i.useState(""),[m,c]=i.useState(!1),[a,h]=i.useState({registered:!1,success:!1,failed:!1}),f=e=>{n(e)},b=async()=>{c(!0);try{const e=await fetch("/api/register",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({username:p,password:l})});e.ok?(c(!1),y()):e.status===400?(c(!1),_()):(c(!1),_(),console.error(`Error: ${e.statusText}`))}finally{}},y=()=>{h(()=>({registered:!0,success:!0,failed:!1}))},_=()=>{h(()=>({registered:!0,success:!1,failed:!0}))},v=e=>{n(e),window.location.href="/"},I=e=>{n(e),window.location.href="/"};return s.jsxs("div",{className:N(r.root,o),children:[m&&s.jsx(w,{}),s.jsxs("div",{className:r.popup,children:[a.registered&&s.jsxs(s.Fragment,{children:[a.success&&s.jsx("div",{children:s.jsx(U,{onClose:v,selectedLanguage:t})}),a.failed&&s.jsx("div",{children:s.jsx(E,{onClose:I,selectedLanguage:t})})]}),s.jsxs("div",{className:r.popupInner,children:[s.jsx("button",{onClick:f,className:r.close,children:t==="chinese"?"关闭":"Close"}),s.jsx("label",{children:t==="chinese"?"用户名:":"Username:"}),s.jsx("br",{}),s.jsx("input",{id:"username",type:"text",value:p,onChange:e=>x(e.target.value)}),s.jsx("br",{}),s.jsx("label",{children:t==="chinese"?"密码:":"Password:"}),s.jsx("br",{}),s.jsx("input",{id:"password",type:"test",value:l,onChange:e=>j(e.target.value)}),s.jsx("br",{}),s.jsx("button",{id:"registrationButton",className:r.button,type:"button",onClick:b,disabled:p===""||l==="",children:t==="chinese"?"注册账号！":"Register account!"})]})]})]})};export{J as Register};
